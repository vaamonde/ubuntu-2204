# Autor: Robson Vaamonde
# Site: www.procedimentosemti.com.br
# Facebook: facebook.com/ProcedimentosEmTI
# Facebook: facebook.com/BoraParaPratica
# YouTube: youtube.com/BoraParaPratica
# Linkedin: https://www.linkedin.com/in/robson-vaamonde-0b029028/
# Instagram: https://www.instagram.com/procedimentoem/?hl=pt-br
# Data de criação: 03/01/2026
# Data de atualização: 03/01/2026
# Versão: 0.01
# Testado e homologado para a versão do Ubuntu Server 22.04.x LTS x64x
# Testado e homologado para a versão do Graylog Server v7.1.x
#
# ======== BLOCO DE CONFIGURAÇÃO PADRÃO DO GRAYLOG SERVER ========
#
# Endereço e porta onde a interface Web e a API do Graylog irão escutar
# 0.0.0.0 permite acesso por qualquer interface de rede do servidor
http_bind_address = 0.0.0.0:9000
#
# Segredo usado para criptografar informações sensíveis e sessões de usuário
# Deve ter no mínimo 64 caracteres e ser o mesmo em todos os nós do cluster
password_secret = COLAR_SUA_SENHA_SEGURA_AQUI
#
# Hash da senha do usuário root do Graylog
# Usado para acesso administrativo local em caso de problemas de autenticação externa
root_password_sha2 = COLAR_SUA_SENHA_SEGURA_AQUI
#
# Fuso horário utilizado pelo usuário root e pela interface do Graylog
root_timezone = America/Sao_Paulo
#
# String de conexão com o MongoDB
# O MongoDB armazena configurações, usuários e metadados
mongodb_uri = mongodb://graylog:graylog@localhost:27017/graylog
#
# Número máximo de conexões simultâneas com o MongoDB
mongodb_max_connections = 1000
#
# Endereço(s) do Elasticsearch/OpenSearch utilizados pelo Graylog
# Responsável pelo armazenamento e indexação dos logs
elasticsearch_hosts = http://172.16.1.20:9200
#
# Define se este servidor será o líder do cluster
# O líder executa tarefas agendadas e de manutenção
is_leader = true
#
# Arquivo onde o ID único do nó Graylog será armazenado
# Esse ID identifica o servidor dentro do cluster
node_id_file = /etc/graylog/server/node-id
#
# Diretório onde ficam os binários internos utilizados pelo Graylog
bin_dir = /usr/share/graylog-server/bin
#
# Diretório de dados do Graylog
# Armazena estados internos e informações operacionais
data_dir = /var/lib/graylog-server
#
# Diretório onde ficam os plugins do Graylog
plugin_dir = /usr/share/graylog-server/plugin
#
# Define se o Graylog irá mapear campos de acordo com os streams
# Pode melhorar a organização da interface, mas impacta desempenho
stream_aware_field_types = false
#
# Estratégias de retenção que ficam indisponíveis para configuração via interface Web
disabled_retention_strategies = none,close
#
# Permite ou não pesquisas com wildcard no início (*texto)
# Pode causar alto consumo de recursos
allow_leading_wildcard_searches = false
#
# Habilita ou desabilita o destaque (highlight) de termos nas buscas
# Pode aumentar o consumo de memória
allow_highlighting = false
#
# Modo de sugestão de valores de campos durante buscas on = ativado
field_value_suggestion_mode = on
#
# Quantidade máxima de mensagens enviadas ao Elasticsearch por lote
# Impacta desempenho e uso de memória
output_batch_size = 500
#
# Intervalo máximo (em segundos) para envio de mensagens ao Elasticsearch
output_flush_interval = 1
#
# Quantidade de falhas consecutivas permitidas antes de pausar um output
output_fault_count_threshold = 5
#
# Tempo (em segundos) de penalidade antes de tentar reativar um output com falha
output_fault_penalty_seconds = 30
#
# Estratégia de espera dos processadores internos do Graylog
# blocking melhora desempenho em ambientes mais robustos
processor_wait_strategy = blocking
#
# Tamanho do buffer interno principal do Graylog
# Deve ser potência de 2 e influencia diretamente o desempenho
ring_size = 65536
#
# Tamanho do buffer de entrada de mensagens
inputbuffer_ring_size = 65536
#
# Estratégia de espera do buffer de entrada
inputbuffer_wait_strategy = blocking
#
# Habilita o Journal de mensagens
# Usado como fila local para evitar perda de logs
message_journal_enabled = true
#
# Diretório onde o Journal de mensagens será armazenado
message_journal_dir = /var/lib/graylog-server/journal
#
# Tempo de espera antes de marcar o nó como indisponível para balanceadores
lb_recognition_period_seconds = 3
#
# Diretório permitido para execução de scripts de integrações
integrations_scripts_dir = /usr/share/graylog-server/scripts
#