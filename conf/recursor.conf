# Autor: Robson Vaamonde
# Site: www.procedimentosemti.com.br
# Facebook: facebook.com/ProcedimentosEmTI
# Facebook: facebook.com/BoraParaPratica
# YouTube: youtube.com/BoraParaPratica
# Linkedin: https://www.linkedin.com/in/robson-vaamonde-0b029028/
# Instagram: https://www.instagram.com/procedimentoem/?hl=pt-br
# Data de criação: 07/10/2025
# Data de atualização: 09/10/2025
# Versão: 0.02
# Testado e homologado para a versão do Ubuntu Server 22.04.x LTS x64x
# Testado e homologado para a versão do PowerDNS Recursor v4.6.x
#
# Configurando o serviço do PowerDNS Recursor (Resolução Interna e Externa)
#
# Endereço e porta local (IPv4 e IPv6)
local-address=172.16.1.20,::1,2804:14c:90:8938::20
local-port=53
#
# Resolver zonas internas (encaminhar para o PowerDNS Authoritative local)
forward-zones=pti.intra=127.0.0.1:5300
#
# Resolver zonas externo (encaminhar para o Cloudflare) com suporte a IPv4 e IPv6
forward-zones-recurse=.=1.1.1.1;1.0.0.1;2606:4700:4700::1111;2606:4700:4700::1001
#
# DNSSEC: validar assinaturas criptográficas das zonas internas e externas
#dnssec=validate
dnssec=process
#
# Habilitar o suporte ao DNS over TLS (DoT)
dot-to-port-853=yes
#
# Permitir consultas de hosts internos ao PowerDNS Recursor (IPv4 e IPv6)
allow-from=127.0.0.0/8,172.16.1.0/24,::1/128,fd00::/8,2804:14c:90:8938::/64
#
# Ajustes de desempenho das consultas do PowerDNS Recursor
threads=2
max-cache-entries=100000
#
# Logs e identificação do PowerDNS Recursor
log-common-errors=no
quiet=yes
server-id=recursor-1
