// Autor: Robson Vaamonde
// Site: www.procedimentosemti.com.br
// Facebook: facebook.com/ProcedimentosEmTI
// Facebook: facebook.com/BoraParaPratica
// YouTube: youtube.com/BoraParaPratica
// Linkedin: https://www.linkedin.com/in/robson-vaamonde-0b029028/
// Instagram: https://www.instagram.com/procedimentoem/?hl=pt-br
// Data de criação: 21/11/2025
// Data de atualização: 27/11/2025
// Versão: 0.03
// Testado e homologado para a versão do Ubuntu Server 22.04.x LTS x64x
// Testado e homologado para a versão do Kea Control Agent v3.0.x
//
// ====== BLOCO DE CONFIGURAÇÃO PADRÃO DO KEA CTRL AGENT ======

{
  "Control-agent": {

    // ------------------------------------------------------------
    // http-host
    // Endereço IP onde o Control Agent ficará escutando.
    // Use 127.0.0.1 para aceitar apenas conexões locais
    // (Stork, scripts ou API local).
    // Use 0.0.0.0 caso deseje permitir conexões remotas.
    // ------------------------------------------------------------
    "http-host": "127.0.0.1",

    // ------------------------------------------------------------
    // http-port
    // Porta onde o Kea Control Agent disponibiliza sua API REST.
    // É através dessa porta que ferramentas como o Stork Server
    // se conectam para gerenciar o Kea DHCP.
    // ------------------------------------------------------------
    "http-port": 8000,

    // ------------------------------------------------------------
    // control-sockets
    // Configurações dos sockets internos usados para comunicação
    // entre o Control Agent e os módulos do Kea (DHCPv4/DHCPv6).
    //
    // Neste caso, o Control Agent está conectado ao servidor
    // DHCPv4 via um socket UNIX local.
    // ------------------------------------------------------------
    "control-sockets": {

      "dhcp4": {
        // Tipo de socket: "unix" (mais seguro e rápido).
        // Também poderia ser "tcp" em cenários distribuídos.
        "socket-type": "unix",

        // Caminho do socket UNIX utilizado pelo Kea DHCP4 Server.
        // Esse caminho deve ser o mesmo declarado no
        // arquivo kea-dhcp4.conf.
        "socket-name": "/var/run/kea/kea4-ctrl-socket"
      },

        // Caminho do socket UNIX utilizado pelo Kea DHCP6 Server.
        // Esse caminho deve ser o mesmo declarado no
        // arquivo kea-dhcp6.conf.
      "dhcp6": {
        "socket-type": "unix",
        "socket-name": "/var/run/kea/kea6-ctrl-socket"
      },

        // Caminho do socket UNIX utilizado pelo Kea DHCP-DDNS Server.
        // Esse caminho deve ser o mesmo declarado no
        // arquivo kea-dhcp-ddns.conf.
      "dhcp-ddns": {
        "socket-type": "unix",
        "socket-name": "/var/run/kea/kea-ddns-ctrl-socket"
      },
    },

    // ------------------------------------------------------------
    // hooks-libraries
    // Lista de bibliotecas de extensões (hooks) adicionadas ao
    // Control Agent. Normalmente fica vazia, porque os hooks são
    // carregados pelo DHCPv4/DHCPv6 e não pelo Control Agent.
    //
    // Exemplo:
    // "hooks-libraries": [
    //   { "library": "/usr/lib/kea/hooks/libdhcp_lease_cmds.so" }
    // ]
    // ------------------------------------------------------------
    "hooks-libraries": [],

    // ------------------------------------------------------------
    // loggers
    // Configurações de logs do Control Agent.
    // É aqui que definimos o nível de log, formato e saída.
    // ------------------------------------------------------------
    "loggers": [
      {
        // Nome do logger (permaneça como "kea-ctrl-agent").
        "name": "kea-ctrl-agent",

        "output-options": [
          {
            // Tipo de saída: "stdout", arquivo ou syslog.
            // stdout = ideal para systemd ou Docker.
            "output": "stdout",

            // Formato da mensagem de log.
            // %-5p → nível do log (INFO, DEBUG...)
            // %m    → mensagem do log
            "pattern": "%-5p %m\n"
          }
        ],

        // Nível de log:
        // OFF, FATAL, ERROR, WARN, INFO, DEBUG
        "severity": "INFO",

        // Nível de debug (0 a 99). Ignorado se severity != DEBUG.
        "debuglevel": 0
      }
    ]
  }
}
